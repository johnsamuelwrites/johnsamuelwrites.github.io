<html>

<head>
    <meta charset="utf-8" />
    <title>Principes des Langages de Programmation : la chaine de compilation (2024-2025): John Samuel</title>
    <link rel="shortcut icon" href="../../../../../images/logo/favicon.png" />
    <style type="text/css">
        body {
            height: 100%;
            width: 100%;
            background-color: white;
            margin: 0;
            overflow: hidden;
            font-family: Arial;
        }

        .slide {
            height: 100%;
            width: 100%;
        }

        .content {
            height: 79%;
            width: 95vw;
            display: flex;
            line-height: 1.7em;
            flex-direction: column;
            align-items: flex-start;
            margin: 0 auto;
            color: #000000;
            text-align: left;
            padding-left: 1.5vmax;
            padding-top: 1.5vmax;
            overflow-x: auto;
            font-size: 2.8vmin;
            flex-wrap: wrap;
        }

        .content h1,
        h2,
        h3,
        h4 {
            color: #1B80CF;
        }

        .content .topichighlight {
            background-color: #78002E;
            color: #FFFFFF;
        }

        .content .topicheading {
            background-color: #1B80CF;
            color: #FFFFFF;
            vertical-align: middle;
            border-radius: 0 2vmax 2vmax 0%;
            height: 4vmax;
            line-height: 4vmax;
            padding-left: 1vmax;
            margin: 0.1vmax;
            width: 50%;
            margin-bottom: 1vmax;
        }

        .content .flexcontent {
            display: flex;
            overflow-y: auto;
            font-size: 2.8vmin;
            flex-wrap: wrap;
        }

        .content .gridcontent {
            display: grid;
            grid-template-columns: auto auto auto auto;
            grid-column-gap: 0px;
            grid-row-gap: 0px;
            grid-gap: 0px;
        }

        .content .topicsubheading {
            background-color: #1B80CF;
            color: #FFFFFF;
            vertical-align: middle;
            border-radius: 0 1.5vmax 1.5vmax 0%;
            height: 3vmax;
            margin: 0.1vmax;
            font-size: 90%;
            line-height: 3vmax;
            padding-left: 1vmax;
            width: 50%;
            margin-bottom: 1vmax;
        }

        .content table {
            color: #000000;
            font-size: 100%;
            width: 100%;
        }

        .content a:link,
        .content a:visited {
            color: #1B80CF;
            text-decoration: none;
        }

        .content th {
            color: #FFFFFF;
            background-color: #1B80CF;
            border-radius: 2vmax 2vmax 2vmax 2vmax;
            font-size: 120%;
            padding: 15px;
        }

        .content figure {
            max-width: 90%;
            max-height: 90%;
        }

        .content .fullwidth img {
            max-width: 90%;
            max-height: 90%;
        }

        .content figure img {
            max-width: 50vmin;
            max-height: 50vmin;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .content figure figcaption {
            max-width: 90%;
            max-height: 90%;
            margin: 0.1vmax;
            font-size: 90%;
            text-align: center;
            padding: 0.5vmax;
            background-color: #E1F5FE;
            border-radius: 2vmax 2vmax 2vmax 2vmax;
        }

        .content figure .source {
            font-size: 2vmin;
        }

        .content td {
            color: #000000;
            width: 8%;
            padding-left: 3vmax;
            padding-top: 1vmax;
            padding-bottom: 1vmax;
            background-color: #E1F5FE;
            border-radius: 2vmax 2vmax 2vmax 2vmax;
        }

        .content li {
            line-height: 1.7em;
        }

        .content {
            line-height: 1.5em;
        }

        .header {
            color: #ffffff;
            background-color: #00549d;
            height: 5vmax;
        }

        .header h1 {
            text-align: center;
            vertical-align: middle;
            font-size: 3vmax;
            line-height: 4vmax;
            margin: 0;
        }

        .footer {
            height: 3vmax;
            line-height: 3vmax;
            vertical-align: middle;
            color: #ffffff;
            background-color: #00549d;
            margin: 0;
            padding: .3vmax;
            overflow: hidden;
        }

        .footer .contact {
            float: left;
            color: #ffffff;
            text-align: left;
            font-size: 3.2vmin;
        }

        .footer .navigation {
            float: right;
            text-align: right;
            width: 8vw;
            font-size: 3vmin;
        }

        .footer .navigation .next,
        .prev {
            font-size: 3vmin;
            color: #ffffff;
            text-decoration: none;
        }

        .footer .navigation .next::after {
            content: "| >";
        }

        .footer .navigation .prev::after {
            content: "< ";
        }

        /* Using same Jupyter CSS
     */

        .highlight {
            background: #f8f8f8;
        }

        .highlight .c {
            color: #408080;
            font-style: italic
        }

        /* Comment */

        .highlight .err {
            border: 1px solid #FF0000
        }

        /* Error */

        .highlight .k {
            color: #008000;
            font-weight: bold
        }

        /* Keyword */

        .highlight .o {
            color: #666666
        }

        /* Operator */

        .highlight .ch {
            color: #408080;
            font-style: italic
        }

        /* Comment.Hashbang */

        .highlight .c1 {
            color: #408080;
            font-style: italic
        }

        /* Comment.Single */

        .highlight .cs {
            color: #408080;
            font-style: italic
        }

        /* Comment.Special */

        .highlight .cm {
            color: #408080;
            font-style: italic
        }

        /* Comment.Multiline */

        .highlight .nn {
            color: #0000FF;
            font-weight: bold
        }

        /* Name.Namespace */

        .highlight .k {
            color: #008000;
            font-weight: bold
        }

        /* Keyword */

        .highlight .s2 {
            color: #BA2121
        }

        /* Literal.String.Double */

        .highlight .s1 {
            color: #BA2121
        }

        /* Literal.String.Single */

        .highlight .kn {
            color: #008000;
            font-weight: bold
        }

        /* Keyword.Namespace */

        .highlight .nb {
            color: #008000
        }

        /* Name.Builtin */

        .highlight .mb {
            color: #666666
        }

        /* Literal.Number.Bin */

        .highlight .mf {
            color: #666666
        }

        /* Literal.Number.Float */

        .highlight .mh {
            color: #666666
        }

        /* Literal.Number.Hex */

        .highlight .mi {
            color: #666666
        }

        /* Literal.Number.Integer */

        .highlight .mo {
            color: #666666
        }

        /* Literal.Number.Oct */

        @media (max-width: 640px),
        screen and (orientation: portrait) {
            body {
                max-width: 100%;
                max-height: 100%;
            }

            .slide {
                height: 100%;
                width: 100%;
            }

            .content {
                width: 100%;
                height: 92%;
                display: flex;
                flex-direction: row;
                text-align: left;
                padding: 1vw;
                line-height: 3.8vmax;
                font-size: 1.8vmax;
                flex-wrap: wrap;
            }

            .content .topicheading {
                width: 90%;
            }

            .content h1,
            h2,
            h3,
            h4 {
                width: 100%;
            }

            .content figure img {
                max-width: 80vmin;
                max-height: 50vmin;
            }

            .content figure figcaption {
                max-width: 90%;
                max-height: 90%;
            }
        }

        @media print {
            body {
                max-width: 100%;
                max-height: 100%;
            }

            .content {
                font-size: 2.5vmin;
            }

            .content .flexcontent {
                font-size: 2.5vmin;
            }
        }
    </style>
</head>

<body>
    <section class="slide" id="slide1">
        <div class="header">
        </div>
        <div class="content">
            <h1 style="font-size:3.5vmin">Principes des Langages de Programmation</br>
                <span style="line-height:3.5vmax;font-size:3.0vmin">
                    La chaine de compilation<span>
            </h1>
            <p><b>John Samuel</b></br>
                CPE Lyon<br /><br />
                <b>Année</b>: 2024-2025<br />
                <b>Courriel</b>: john.samuel@cpe.fr</br>
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img
                        alt="Creative Commons License" style="border-width:0"
                        src="../../../../../en/teaching/courses/2017/C/88x31.png" /></a>
            </p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">1

                <a class="next" href="#slide2"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide2">
        <div class="header">
            <h1>3. Principes des Langages de Programmation : Objectifs</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">Objectifs</h3>
            <ul>
                <li>La chaine de compilation</li>
                <li>Préprocesseur</li>
                <li>Langage intermédiaire</li>
                <li>Optimisation de code</li>
                <li>Génération de code natif</li>
                <li>Code objet</li>
            </ul>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">2
                <a class="prev" href="#slide1"></a>
                <a class="next" href="#slide3"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide3">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <figure>
                <img src="../../../../../en/teaching/courses/2017/C/images/compiler.svg" height="400vh" />
            </figure>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">3
                <a class="prev" href="#slide2"></a>
                <a class="next" href="#slide4"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide4">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p><strong>1. Prétraitement (Étape 1)</strong></p>
            <ul>
                <li><strong>Expansion des macros</strong> : Le préprocesseur remplace les macros par leurs formes
                    développées.</li>
                <li><strong>Inclusion de fichiers</strong> : Le préprocesseur inclut les fichiers spécifiés par les
                    directives <code>#include</code>, qui peuvent être des fichiers d’en-tête ou des fragments de code
                    source.</li>
                <li><strong>Compilation conditionnelle</strong> : Le préprocesseur permet la compilation conditionnelle
                    en fonction des directives <code>#ifdef</code>, <code>#ifndef</code>, <code>#else</code> et
                    <code>#endif</code>.
                </li>
            </ul>
            <p>La sortie du prétraitement est une version modifiée du code source original, qui est ensuite transmise à
                l’étape suivante.</p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">4
                <a class="prev" href="#slide3"></a>
                <a class="next" href="#slide5"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide5">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p><strong>2. Analyse lexicale (Étape 2)</strong></p>
            <ul>
                <li><strong>Tokenisation</strong> : L’analyseur lexical divise le code source en jetons individuels,
                    tels que des mots-clés, des identificateurs, des littéraux et des symboles.</li>
                <li><strong>Classification des caractères</strong> : L’analyseur lexical classe les caractères en
                    différentes catégories en fonction de leur signification dans le code source.</li>
            </ul>
            <p>La sortie de l’analyse lexicale est une liste de jetons, qui est ensuite transmise à l’analyseur
                syntaxique pour un traitement ultérieur.</p>

        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">5
                <a class="prev" href="#slide4"></a>
                <a class="next" href="#slide6"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide6">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p><strong>3. Analyse syntaxique (Étape 3)</strong></p>
            <ul>
                <li><strong>Génération de l’arbre syntaxique</strong> : L’analyseur syntaxique construit un arbre
                    syntaxique abstrait (AST) à partir du flux de jetons.</li>
                <li><strong>Détection et rapport d’erreurs</strong> : L’analyseur syntaxique identifie les erreurs de
                    syntaxe dans le code source et les signale à l’utilisateur.</li>
            </ul>
            <p>La sortie de l’analyse syntaxique est un AST validé, qui représente la structure syntaxique du programme.
                Cette étape garantit que le code source respecte les règles de syntaxe du langage.</p>

        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">6
                <a class="prev" href="#slide5"></a>
                <a class="next" href="#slide7"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide7">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p><strong>4. Analyse sémantique (Étape 4)</strong></p>
            <ul>
                <li><strong>Vérification des types</strong> : L’analyseur sémantique vérifie que les types des variables
                    et des expressions correspondent aux types attendus.</li>
                <li><strong>Analyse de portée</strong> : L’analyseur sémantique résout les déclarations de variables,
                    les appels de fonctions et les autres problèmes de portée.</li>
                <li><strong>Propagation des contraintes</strong> : L’analyseur sémantique propage les contraintes et les
                    informations entre les différentes parties du programme.</li>
            </ul>
            <p>La sortie de l’analyse sémantique est un AST validé avec des informations de type et de portée. Cette
                étape garantit que le code source respecte les règles sémantiques du langage.</p>

        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">7
                <a class="prev" href="#slide6"></a>
                <a class="next" href="#slide8"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide8">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p><strong>5. Génération de code intermédiaire (Étape 5)</strong></p>
            <ul>
                <li><strong>Traduction de l’arbre syntaxique abstrait</strong> : Le générateur de code intermédiaire
                    traduit l’AST validé en une représentation intermédiaire, telle que du bytecode ou des arbres
                    syntaxiques abstraits.</li>
                <li><strong>Identification des opportunités d’optimisation</strong> : Le générateur de code
                    intermédiaire identifie les opportunités d’optimisation potentielles dans le programme.</li>
            </ul>
            <p>La sortie de la génération de code intermédiaire est une représentation intermédiaire indépendante de la
                plate-forme, qui peut être exécutée par un environnement d’exécution. Cette étape garantit que le code
                source est converti en une forme qui peut être exécutée de manière efficace.</p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">8
                <a class="prev" href="#slide7"></a>
                <a class="next" href="#slide9"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide9">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p><strong>6. Génération de code natif (Étape 6)</strong></p>
            <ul>
                <li><strong>Optimisation du code</strong> : Le générateur de code natif applique diverses optimisations
                    pour améliorer les performances, telles que l’élimination de code mort et l’allocation de registres.
                </li>
                <li><strong>Génération d’instructions natives</strong> : Le générateur de code natif génère des
                    instructions spécifiques à la machine à partir de la représentation intermédiaire.</li>
            </ul>
            <p>La sortie de la génération de code natif est le code exécutable final qui peut être exécuté directement
                sur la plate-forme cible. Cette étape garantit que le code source est traduit en code machine optimisé
                pour l’exécution.</p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">9
                <a class="prev" href="#slide8"></a>
                <a class="next" href="#slide10"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide10">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p>Supposons que nous ayons un programme “Hello, World!” simple écrit en C :</p>
            <div class="highlight">
                <pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Bonjour le monde !!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre>
            </div>


        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">10
                <a class="prev" href="#slide9"></a>
                <a class="next" href="#slide11"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide11">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <p>Le processus de compilation se déroulerait comme suit :</p>
            <ol type="1">
                <li><strong>Prétraitement</strong> : Le préprocesseur développe la directive <code>#include</code> pour
                    inclure le fichier d’en-tête de la bibliothèque standard.</li>
                <li><strong>Analyse lexicale</strong> : L’analyseur lexical divise le code source en jetons individuels,
                    tels que des mots-clés, des identificateurs, des littéraux et des symboles.</li>
                <li><strong>Analyse syntaxique</strong> : L’analyseur syntaxique construit un arbre syntaxique abstrait
                    (AST) à partir du flux de jetons, qui représente la structure syntaxique du programme.</li>
            </ol>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">11
                <a class="prev" href="#slide10"></a>
                <a class="next" href="#slide12"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide12">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">6 étapes de la chaine de compilation</h3>
            <ol start="4">
                <li><strong>Analyse sémantique</strong> : L’analyseur sémantique vérifie que les types des variables et
                    des expressions correspondent aux types attendus et résout les problèmes de portée.</li>
                <li><strong>Génération de code intermédiaire</strong> : Le générateur de code intermédiaire traduit
                    l’AST validé en bytecode ou en arbres syntaxiques abstraits.</li>
                <li><strong>Génération de code natif</strong> : Le générateur de code natif applique des optimisations
                    et génère des instructions spécifiques à la machine à partir de la représentation intermédiaire.
                </li>
            </ol>
            <p>La sortie finale est le code exécutable qui peut être exécuté directement sur la plate-forme cible.</p>


        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">12
                <a class="prev" href="#slide11"></a>
                <a class="next" href="#slide13"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide13">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">1. Préprocesseur</h3>
            <p>Cette étape consiste à traiter les directives de préprocesseur contenues dans le code source, telles que
                les directives d'inclusion (#include) et de remplacement de macros (#define). Le résultat est
                généralement un fichier source modifié avec ces directives résolues.</p>
            <h3>cercle.c</h3>
            <code><span style="color:purple">#ifndef</span> PI</br>
			<span style="color:purple">#define</span> PI 3.14159</br>
			<span style="color:purple">#endif</span></br></br>

			<span style="color:green">float</span> <span style="color:blue">aire</span>(
			<span style="color:green">float</span> <span style="color:blue">rayon</span>) { <br>
			&nbsp;<span style="color:green">return</span>(PI * <span style="color:blue">rayon</span>
						* <span style="color:blue">rayon</span>);<br>
			}<br>
                        </code>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">13
                <a class="prev" href="#slide12"></a>
                <a class="next" href="#slide14"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide14">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">1. Préprocesseur</h3>
            <code>
                  $ gcc -E cercle.c
		  # 1 "cercle.c"</br>
# 1 "<built-in>"</br>
# 1 "<command-line>"</br>
# 31 "<command-line>"</br>
# 1 "/usr/include/stdc-predef.h" 1 3 4</br>
# 32 "<command-line>" 2</br>
# 1 "cercle.c"</br>
</br>
float aire(float rayon) {</br>
  return(3.14 * rayon * rayon);</br>
}</br>
                  </code>
            <p>Le résultat affiche le code source après le traitement des directives de préprocesseur. Cela peut inclure
                des inclusions de fichiers, la résolution de macros et d'autres transformations avant la compilation
                proprement dite.</p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">14
                <a class="prev" href="#slide13"></a>
                <a class="next" href="#slide15"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide15">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">2. Langage intermédiaire</h3>
            <p>Ces étapes montrent comment le code source est transformé en diverses représentations intermédiaires
                avant d'atteindre le code machine final. Chacune de ces étapes permet une analyse et une optimisation du
                code à différents niveaux.</p>
            <code>
                  $ gcc -v bonjour.c # les étapes importantes</br>
                  $ gcc -save-temps -v bonjour.c # les fichiers *.i, *.s</br>
                  $ gcc -fdump-tree-all bonjour.c</br>
                  $ gcc -fdump-rtl-all bonjour.c</br>
                  </code>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">15
                <a class="prev" href="#slide14"></a>
                <a class="next" href="#slide16"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide16">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">2. Langage intermédiaire</h3>
            <p>Ce code généré montre comment les opérations mathématiques sont exprimées en AST (Abstract Syntax Tree -
                arbre de syntaxe abstraite).</p>
            <code>
                  $ gcc -fdump-tree-all -c cercle.c</br>
		  $ cat cercle.c.005t.gimple</br>
aire (float rayon)</br>
{</br>
  float D.1914;</br>
  _1 = (double) rayon;</br>
  _2 = _1 * 3.140000000000000124344978758017532527446746826171875e+0;</br>
  _3 = (double) rayon;</br>
  _4 = _2 * _3;</br>
  D.1914 = (float) _4;</br>
  return D.1914;</br>
}
                  </code>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">16
                <a class="prev" href="#slide15"></a>
                <a class="next" href="#slide17"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide17">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">3. Optimisation de code</h3>
            <code>
                  $ gcc -O2 bonjour.c</br>
                  </code>
            <ul>
                <li>-O1 : Niveau d'optimisation 1. Il applique des optimisations
                    de base pour améliorer les performances tout en maintenant une bonne
                    expérience de débogage.</li>
                <li>-O2 : Niveau d'optimisation 2. Il applique des optimisations
                    plus avancées, ce qui peut entraîner une meilleure performance, mais la
                    compilation peut prendre plus de temps. </li>
                <li>-O3 : Niveau d'optimisation 3. Il applique des optimisations
                    plus agressives que -O2, ce qui peut donner de meilleures performances,
                    mais la compilation peut prendre plus de temps et la taille du fichier
                    exécutable peut augmenter.</li>
                <li>-Os : Optimisation de la taille du binaire. Il cherche à
                    réduire la taille du fichier exécutable, ce qui peut être utile dans des
                    environnements avec des contraintes de stockage.</li>
                <li>-Ofast : Niveau d'optimisation élevé. Il applique des
                    optimisations maximales, souvent au détriment de la taille du fichier
                    exécutable. Utilisé pour obtenir la meilleure performance possible.</li>
                <li>-Og : Optimisation pour le débogage. Il optimise le code
                    tout en conservant des informations de débogage utiles. </li>
            </ul>

        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">17
                <a class="prev" href="#slide16"></a>
                <a class="next" href="#slide18"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide18">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">4. Génération de code natif</h3>
            <p>L'option -S indique au compilateur de produire le code assembleur au lieu de générer un exécutable. Le
                résultat de cette étape est un fichier avec l'extension .s, qui contient le code assembleur généré.</p>
            <code>
                  $ gcc -S bonjour.c</br>
                  $ cat bonjour.s
                  </code>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">18
                <a class="prev" href="#slide17"></a>
                <a class="next" href="#slide19"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide19">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">4. Génération de code natif et l'optimisation de code</h3>
            <code style="width:40%">
                  <span style="color: green">int</span> <span style="color:blue">main</span>() {</br>
                  &nbsp;&nbsp;<span style="color: green">int</span> <span style="color: blue">num</span> = 2 + 3;</br>
                  &nbsp;&nbsp;<span style="color: green">return</span>(0);</br>
                  }
                  </code>
            <h3>Compilation (Pas d'optimisations)</h3>
            <code style="width:40%">
                  $ gcc -O0 -S somme.c
                  </code>
            <p style="width:40%">L'absence d'optimisation (-O0) signifie que le compilateur n'a pas appliqué
                d'optimisations particulières, ce qui permet d'obtenir un code assembleur directement équivalent au code
                C source. </p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">19
                <a class="prev" href="#slide18"></a>
                <a class="next" href="#slide20"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide20">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">4. Génération de code natif et l'optimisation de code</h3>
            <h3 style="width:40%">somme.s</h3>
            <code style="width:40%">
                    main:</br>
                    .LFB0:</br>
                    &nbsp;&nbsp;.cfi_startproc</br>
                    &nbsp;&nbsp;pushq   %rbp</br>
                    &nbsp;&nbsp;.cfi_def_cfa_offset 16</br>
                    &nbsp;&nbsp;.cfi_offset 6, -16</br>
                    &nbsp;&nbsp;movq    %rsp, %rbp</br>
                    &nbsp;&nbsp;.cfi_def_cfa_register 6</br>
                    &nbsp;&nbsp;movl    $5, -4(%rbp)</br>
                    &nbsp;&nbsp;movl    $0, %eax</br>
                    &nbsp;&nbsp;popq    %rbp</br>
                    &nbsp;&nbsp;.cfi_def_cfa 7, 8</br>
                    &nbsp;&nbsp;ret</br>
                    &nbsp;&nbsp;.cfi_endproc</br>
                  </code>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">20
                <a class="prev" href="#slide19"></a>
                <a class="next" href="#slide21"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide21">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">4. Génération de code natif et l'optimisation de code</h3>
            <code style="width:30%">
                  <span style="color: green">int</span> <span style="color:blue">main</span>() {</br>
                  &nbsp;&nbsp;<span style="color: green">int</span> <span style="color: blue">num</span> = 2 + 3;</br>
                  &nbsp;&nbsp;<span style="color: green">return</span>(0);</br>
                  }
                  </code>
            <code style="width:20%">
                  $ gcc -O2 -S somme.c
                  </code>
            <code style="width:20%">
                  <h3>somme.s</h3>
                    main:</br>
                    .LFB0:</br>
                    &nbsp;&nbsp;.cfi_startproc</br>
                    &nbsp;&nbsp;xorl    %eax, %eax</br>
                    &nbsp;&nbsp;ret</br>
                    &nbsp;&nbsp;.cfi_endproc</br>
                  </code>
            <p style="width:40%">
                <b>Compilation (optimisation: 2)</b> :
                L'optimisation de niveau 2 a permis au compilateur de reconnaître que l'addition 2 + 3 est constante et
                que la valeur de retour de la fonction est toujours 0. Par conséquent, le calcul inutile est éliminé, ce
                qui donne un code assembleur très efficace et court. Cette optimisation est typique des optimisations de
                constantes que le compilateur peut effectuer pour améliorer les performances du code.
            </p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">21
                <a class="prev" href="#slide20"></a>
                <a class="next" href="#slide22"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide22">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">4. Génération de code</h3>
            <h4>sur une machine d'architecture 64 bits</h4>
            <code>
                  $ gcc bonjour.c</br>
                  $ file a.out </br>
                  &nbsp;a.out: ELF 64-bit LSB shared object, x86-64</br>
                  </code>
            <p>Cela signifie que le programme compilé est conçu pour être exécuté sur une machine d'architecture 64
                bits, spécifiquement une architecture x86-64.</p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">22
                <a class="prev" href="#slide21"></a>
                <a class="next" href="#slide23"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide23">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">4. Génération de code</h3>
            <h4>sur une machine d'architecture 64 bits</h4>
            <p>Cette commande indique au compilateur GCC de générer un exécutable 32 bits en utilisant l'architecture
                i686 (Intel 80386). L'option -m32 spécifie que l'exécutable doit être compilé en tant qu'application 32
                bits.</p>
            <code>
                  $ gcc -march=i686 -m32 bonjour.c</br>
            </code>
            <p>Cette commande est similaire à la précédente, mais elle génère également le code assembleur (-S) pour le
                programme.</p>
            <code>
                  $ gcc -S -march=i686 -m32 bonjour.c</br>
                  $ file ./a.out </br>
                  &nbsp;./a.out: ELF 32-bit LSB shared object, Intel 80386</br>
                  </code>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">23
                <a class="prev" href="#slide22"></a>
                <a class="next" href="#slide24"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide24">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3 class="topicsubheading">5. Code objet</h3>
            <p>Cette commande compile le fichier source "client.c" en un fichier objet "client.o". L'option -c indique
                au compilateur de générer uniquement le fichier objet sans produire d'exécutable. Cela permet de diviser
                le processus de compilation en deux étapes.</p>
            <code>
                $ gcc -c client.c </br>
                $ gcc -c color.c </br>
            </code>
            <p>Cette commande prend les fichiers objets "color.o" et "client.o" et les compile en un exécutable nommé
                "color". Le compilateur lie les fichiers objets pour créer l'exécutable final.</p>
            <code>
                $ gcc -o color color.o client.o </br>
                </code>
            <p>Cette approche est couramment utilisée pour séparer la compilation en plusieurs étapes, ce qui peut être
                utile dans des projets plus importants où différentes parties du programme sont gérées séparément avant
                d'être liées ensemble pour former l'exécutable final.</p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">24
                <a class="prev" href="#slide23"></a>
                <a class="next" href="#slide25"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide25">
        <div class="header">
            <h1>3.1. La chaine de compilation</h1>
        </div>
        <div class="content">
            <h3>5. Code objet (Modifications et recompilation)</h3>
            <code>
		                    $ gcc -c client.c color.c <br>
                $ gcc -o client client.o color.o <br>
                $ vim client.c <span style="color: blue"> # Modification du fichier </span><br>
                $ gcc -c client.c <br>
                $ vim client.c <span style="color: blue"> # Modification du fichier </span><br>
                $ gcc -c client.c <br>
                $ gcc -o client client.o color.o <br>
                </code>
            <p>L'objectif de cette séquence de commandes est de compiler des fichiers source en fichiers objet, puis de
                recompiler le programme avec des modifications apportées au fichier source "client.c". Cela permet de
                mettre à jour le programme en reflétant les changements apportés au code source sans avoir à recompiler
                entièrement toutes les sources. Cela peut accélérer le processus de développement en évitant de
                recompiler inutilement les parties du programme qui n'ont pas changé.
            </p>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">25
                <a class="prev" href="#slide24"></a>
                <a class="next" href="#slide26"></a>
            </div>
        </div>
    </section>
    <section class="slide" id="slide26">
        <div class="header">
            <h1>3. Principes des Langages de Programmation : Références</h1>
        </div>
        <div class="content">
            <h1>Références</h1>
            <ul>
                <li>Langage C, Claude Delannoy</li>
                <li><a
                        href="https://fr.wikipedia.org/wiki/Alignement_en_m%C3%A9moire">https://fr.wikipedia.org/wiki/Alignement_en_mémoire</a>
                </li>
                <li><a href="https://fr.wikipedia.org/wiki/Compilateur">https://fr.wikipedia.org/wiki/Compilateur</a>
                </li>
                <li><a
                        href="https://fr.wikipedia.org/wiki/G%C3%A9n%C3%A9ration_de_code_natif">https://fr.wikipedia.org/wiki/G%C3%A9n%C3%A9ration_de_code_natif</a>
                </li>
            </ul>
            <h1>Crédits d'images</h1>
            <ul>
                <li><a href="https://commons.wikimedia.org/wiki/Main_Page">Wikimedia Commons</a></li>
            </ul>
        </div>
        <div class="footer">
            <div class="contact">Principes des Langages de Programmation | John Samuel</div>
            <div class="navigation">26
                <a class="prev" href="#slide25"></a>
            </div>
        </div>
    </section>

    <script>
        function changeCurrentURLSlideNumber(isIncrement) {
            url = window.location.href;
            position = url.indexOf("#slide");
            if (position != -1) { // Not on the first page
                slideIdString = url.substr(position + 6);
                if (!Number.isNaN(slideIdString)) {
                    slideId = parseInt(slideIdString);
                    if (isIncrement) {
                        if (slideId < 26) {
                            slideId = slideId + 1;
                        }
                    } else {
                        if (slideId > 1) {
                            slideId = slideId - 1;
                        }
                    }
                    url = url.replace(/#slide\d+/g, "#slide" + slideId);
                    window.location.href = url;
                }
            } else {
                window.location.href = url + "#slide2";
            }
        }
        document.onkeydown = function (event) {

            event.preventDefault();
            /* This will ensure the default behavior of
                                                            page scroll behaviour (up, down, right, left)*/

            event = event || window.event;
            if (event.keyCode == '37') {
                // left
                changeCurrentURLSlideNumber(false);
            } else if (event.keyCode == '38') {
                // up
                changeCurrentURLSlideNumber(false);
            } else if (event.keyCode == '39') {
                // right
                changeCurrentURLSlideNumber(true);
            } else if (event.keyCode == '40') {
                // down
                changeCurrentURLSlideNumber(true);
            }
        }
        document.body.onmouseup = function (event) {
            event = event || window.event;
            event.preventDefault();
            changeCurrentURLSlideNumber(true);
        }
    </script>
</body>

</html>