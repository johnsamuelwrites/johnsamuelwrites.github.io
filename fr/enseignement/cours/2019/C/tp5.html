<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <link rel="shortcut icon" href="../../images/logo/favicon.png"/>
    <title>Programmation en C: John Samuel</title>
    <style type="text/css">
    body{
      background-color: #FFFFFF;
    }
    #sidebar {
      position: fixed;
      background-color: #1B80CF;
      top: 0;
      left: 0;
      bottom: 0;
      width:25vw;
    }
    .title {
      position:relative;
      text-align: center;
      line-height: 9vh;
      font-size: 1.2vmax;
      font-family: 'Arial';
      margin-top: 20vh;
    }
    .title a:link,
    .title a:visited{
     color: #FFFFFF;
     text-decoration:none;
    }
    .subtitle {
      top: 50vh;
      text-align: center;
      line-height: 1.0vmax;
      font-family: 'Arial';
      font-size: 1.0vmax;
      color: #FFFFFF;
    }
    .subtitle h2{
      color: #FFFFFF;
    }
    a:link, a:visited {
     color:#00363a;
    }
    .subtitle a:link,
    .subtitle a:visited{
     color: #FFFFFF;
     text-decoration:none;
    }
    .licence {
      position:fixed;
      text-align: right;
      bottom:0;
      right:0;
    }
    .home {
     font-family: 'Arial';
     text-align: left;
    }
    .codeexample {
      background-color:#eeeeee;
    }
    .home ul{
      margin: 0;
      padding: 0;
      text-align: left;
      list-style:none;
    }
    .home li{
     position: relative;
     float: left;
     margin-right: 1em;
    }
    .content {
     line-height: 1.5vmax;
     font-size: 1vmax;
     font-family: 'Arial';
     margin-top: 8vh;
    }
    .content h3,h2,h4{
     color:#00363a;
    }
    .exercise {
     margin-left:2vw;
    }
    .exercise p{
     margin-left:1vw;
    }
    .exercise ol{
     margin-left:1.1vw;
    }
    .exercise img{
     width:100%;
    }
    .content a:link,
    .content a:visited {
     color:#00363a;
    }
    .home a:link,
    .home a:visited{
     color: #D3D3D3;
    }
    .page {
      width:65vw;
      height:100%;
      margin-left:25vw;
      overflow: auto;
      padding: 0 1em;
    }
    img {
     max-width:100%;
     max-height:100%;
    }
    @media print {
      #sidebar {
        width:100%;
        top:0;
        position:relative;
        padding-bottom:3vh;
      }
      #sidebar .title {
        margin-top:0;
      }
      .home {
        display:none;
      }
      .page {
        margin-left:5vw;
        width:90%;
      }
    }
    </style>
  </head>
  <body vocab="http://schema.org/">
    <div id="sidebar">
     <div class="title">
      <h1><a href="./index.html">Travaux Pratiques: Programmation en C</a></h1>
     </div>
     <div class="subtitle">
      <h2>Année: 2019-2020</h2>
      <h3><a href="../../../../about.html">John Samuel</a></h3>
     </div>
    </div>
    <div class="licence"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="./../../../../../images/license.png"/></a>
    </div>
    <div class="page">
      <div class="home">
       <ul typeof="BreadcrumbList">
        <li property="itemListElement" typeof="ListItem">
          <a property="item" typeof="WebPage" href="../../../../index.html">
            <span property="name">Home</span>
          </a>
        </li>
        <li property="itemListElement" typeof="ListItem">
         <a property="item" typeof="WebPage" href="index.html">
          <span property="name">Programmation en C</span>
         </a>
        </li>
        <li property="itemListElement" typeof="ListItem">
         <a property="item" typeof="WebPage" href="../../../index.html">
          <span property="name">Enseignement</span>
         </a>
        </li>
       </ul>
      </div>
      <div class="content">
        <h2>Année: 2019-2020</h2>
        <h3>Travaux pratiques 5</h3>
        <h4>Objectifs</h4>
        <ul>
          <li>Comprendre la programmation client-serveur.</li>
        </ul>
        <h3>Client-Serveur</h3>
        <p>Un environnement client-serveur permet un mode de communication sur un réseau entre les programmes. Un de ces programmes est appelé serveur qui répond aux requêtes d’autres programmes appelés clients. Par exemple,</p>
        <ol>
          <li>Un client envoie un message au serveur et le serveur reçoit le message et le renvoie.</li>
          <li>Un client envoie l’opérateur et un/deux numéros et le serveur fait le calcul et envoie le résultat.</li>
        </ol>
        <p>Référence : <a href="https://fr.wikipedia.org/wiki/Client-serveur">https://fr.wikipedia.org/wiki/Client-serveur</a></p>
        <p>Pour simuler un environnement client-serveur, on va utiliser une seule machine en lançant deux terminaux. Sur un des deux terminaux exécutez le code du serveur. Sur l’autre, exécutez le code du client.</p>
        <h4>Exercice 5.1 <span style="color:red">&#9733;</span></h4>
        <div class="exercise">
          <p>Écrivez un programme en créant deux fichiers repertoire.h et repertoire.c qui utilisent l'interface en ligne de commande et prennent le nom du répertoire.</p>
          <p>Ajoutez la déclaration suivante en repertoire.h</p>
          <p class="codeexample">
            <code>
             void lire_dossier(char *);
            </code>
          </p>
          <p> Implémentez cette fonction en repertoire.c qui parcourt le répertoire saisi par l'utilisateur et affiche les noms de tous les fichiers (et répertoires, si aucun) dans ce répertoire. Vous pouvez utiliser opendir, readdir pour parcourir un répertoire. </p>
        </div>
        <h4>Exercice 5.2 <span style="color:red">&#9733;</span></h4>
        <div class="exercise">
          <p>Ajoutez la déclaration suivante en repertoire.h</p>
          <p class="codeexample">
            <code>
              void lire_dossier_recursif(char *);
            </code>
          </p>
          <p> Implémentez la fonction en repertoire.c qui parcourt le répertoire saisi par l'utilisateur en récursif et affiche tous les noms de tous les fichiers et répertoires, sous-répertoires et tous les fichiers dans les sous-répertoires. Pour mieux comprendre cette question, testez </p>
          <p class="codeexample">
            <code>
              $ ls -R 
            </code>
          </p>
          <p>sur la ligne de commande. Testez votre code. Utilisez le principe de la fonction récursive.</p>
        </div>
        <h4>Exercice 5.3 <span style="color:red">&#9733;&#9733;</span></h4>
        <div class="exercise">
          <p>Ajoutez la déclaration suivante en repertoire.h</p>
          <p class="codeexample">
            <code>
              void lire_dossier_iteratif(char *); 
            </code>
          </p>
          <p>Implémentez cette fonction en repertoire.c qui parcourt le répertoire saisi par l'utilisateur en mode itératif et affiche tous les noms de tous les fichiers et répertoires, sous-répertoires et tous les fichiers dans les sous-répertoires. Mais cette fois, utilisez for (ou while ou do..while) pour implémenter cette fonction. Testez votre code.</p>
        </div>
        <h4>Exercice 5.4 <span style="color:red">&#9733;&#9733;</span></h4>
        <div class="exercise">
          <p>Téléchargez les fichiers suivants à partir d’e-campus : client.h, client.c, serveur.h, serveur.c, Makefile. Lisez bien tous les fichiers. Exécutez</p>
          <p class="codeexample">
            <code>
             $ make
            </code>
          </p>
          <p>et voyez les fichiers exécutables qui sont créés.</p>
          <p>Ouvrez deux terminaux. Sur le premier terminal, exécutez</p>
          <p class="codeexample">
            <code>
             ./serveur
            </code>
          </p>
          <p>et sur le second terminal</p>
          <p class="codeexample">
            <code>
             ./client
            </code>
          </p>
          <p>Entrez un message et voyez les affichages sur les deux terminaux.</p>
          <p>Modifiez la fonction recois_envoie_message (serveur.c). Quand le serveur
reçoit un message, il demande à l’utilisateur de saisir un message et envoie ce message
au client. Testez votre code. N’oubliez pas d’utiliser make (pour la compilation et la
génération des fichiers exécutables).</p>
        </div>
        <h4>Exercice 5.5 <span style="color:red">&#9733;&#9733;&#9733;</span></h4>
        <div class="exercise">
          <p>Vous avez remarqué les premiers caractères dans chaque message : ‘message’ suivi par :.  Pour votre prochaine question, on utilisera calcule. Modifiez les fichiers client.c et serveur.c pour le support des calculs simples (+,-,*,...). Ajoutez une fonction envoie_operateur_numeros(...) dans le fichier client.c et recois_numeros_calcule(...) dans le fichier serveur.c. Le client envoie l’opérateur et un (ou deux) numéros et le serveur envoie le résultat. Par exemple, si le client envoie le message</p>
          <p class="codeexample">
            <code>
              calcule : + 23 45
            </code>
          </p>
          <p>Le serveur répond</p>
          <p class="codeexample">
            <code>
              calcule : 68 
            </code>
          </p>
          <p>Testez votre code avec les numéros flottants et entiers.</p>
        </div>
        <h4>Exercice 5.6 <span style="color:red">&#9733;&#9733;&#9733;</span></h4>
        <div class="exercise">
          <p>Pour votre dernière question, téléchargez le dossier etudiant. Dans ce dossier, il y a 5 notes de 5 étudiants. Utilisez envoie_operateur_numeros (voir 6) pour calculer la somme total des notes de chaque étudiant ainsi que la moyenne de classe pour chaque sujet.</p>
        </div>
        <h4>Fichiers</h4>
        <p>repertoire.h, repertoire.c, client.h, client.c, serveur.h, serveur.c</p>
        <h4>Instructions</h4>
        <ul>
          <li>Ne pas oublier les commentaires (nom de fichier, objectif, auteurs, , les lignes importantes de code etc.). Les commentaires sont notés.</li>
          <li>N’oublier pas de mettre à jour le fichier README et ajouter les détails concernant votre deuxième exercice.</li>
          <li>Compte rendu en format .zip en un seul fichier.</li>
        </ul>
      </div>
    </div>
  </body>
</html>
