<!DOCTYPE html>
<html lang="en">

    <head>
        <link rel="shortcut icon" href="../../../images/logo/favicon.png" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Interactive Tic-Tac-Toe game with futuristic design by John Samuel">
        <title>Tic-Tac-Toe Game | John Samuel</title>
        <style>
            /* ========================================
           Design Tokens & CSS Custom Properties
        ======================================== */
            :root {
                /* Game Theme Colors - Neon Cyber Gaming */
                --color-base-bg: #0a0e1a;
                --color-base-surface: #121827;
                --color-base-text: #e2e8f0;
                --color-base-text-muted: #94a3b8;

                /* Accent Colors - Vibrant Gaming Palette */
                --color-accent-1: #00d4ff;
                /* Cyan blue - Player O */
                --color-accent-2: #7c3aed;
                /* Purple - accents */
                --color-accent-3: #ff006e;
                /* Hot pink - Player X */
                --color-accent-light: rgba(0, 212, 255, 0.1);

                /* Game Element Colors */
                --color-grid: rgba(124, 58, 237, 0.3);
                --color-player-x: #ff006e;
                --color-player-o: #00d4ff;
                --color-win-line: #fbbf24;

                /* Gradients */
                --gradient-primary: linear-gradient(135deg, var(--color-accent-1), var(--color-accent-2));
                --gradient-game: linear-gradient(135deg, rgba(124, 58, 237, 0.2), rgba(0, 212, 255, 0.2));

                /* Spacing Scale */
                --space-xs: 0.25rem;
                --space-sm: 0.5rem;
                --space-md: 1rem;
                --space-lg: 1.5rem;
                --space-xl: 2rem;
                --space-2xl: 3rem;
                --space-3xl: 4rem;

                /* Border Radius */
                --radius-sm: 4px;
                --radius-md: 8px;
                --radius-lg: 12px;
                --radius-xl: 16px;
                --radius-2xl: 24px;
                --radius-full: 9999px;

                /* Shadows */
                --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3),
                    0 1px 3px rgba(0, 0, 0, 0.4);
                --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4),
                    0 2px 4px rgba(0, 0, 0, 0.5);
                --shadow-lg: 0 10px 24px rgba(0, 0, 0, 0.5),
                    0 4px 8px rgba(0, 0, 0, 0.4);
                --shadow-glow: 0 0 20px var(--color-accent-1),
                    0 0 40px rgba(0, 212, 255, 0.3);
                --shadow-glow-pink: 0 0 20px var(--color-accent-3),
                    0 0 40px rgba(255, 0, 110, 0.3);

                /* Typography */
                --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI',
                    'Helvetica Neue', Arial, sans-serif;
                --text-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
                --text-sm: clamp(0.875rem, 0.8rem + 0.35vw, 1rem);
                --text-base: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
                --text-lg: clamp(1.125rem, 1.05rem + 0.35vw, 1.25rem);
                --text-xl: clamp(1.25rem, 1.15rem + 0.5vw, 1.5rem);
                --text-2xl: clamp(1.5rem, 1.3rem + 1vw, 2rem);
                --text-3xl: clamp(2rem, 1.6rem + 2vw, 2.5rem);
                --text-4xl: clamp(2.5rem, 2rem + 2.5vw, 3.5rem);
            }

            /* ========================================
           CSS Reset & Base Styles
        ======================================== */
            *,
            *::before,
            *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            html {
                scroll-behavior: smooth;
                scroll-padding-top: 80px;
            }

            body {
                font-family: var(--font-sans);
                font-size: var(--text-base);
                line-height: 1.6;
                color: var(--color-base-text);
                background: var(--color-base-bg);
                min-height: 100vh;
                overflow-x: hidden;
                position: relative;
            }

            /* Animated Background */
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle at 20% 30%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 70%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 50% 50%, rgba(255, 0, 110, 0.05) 0%, transparent 70%);
                z-index: -1;
                animation: backgroundPulse 15s ease-in-out infinite;
            }

            @keyframes backgroundPulse {

                0%,
                100% {
                    opacity: 0.5;
                }

                50% {
                    opacity: 1;
                }
            }

            /* Grid Pattern Overlay */
            body::after {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image:
                    linear-gradient(rgba(124, 58, 237, 0.05) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(124, 58, 237, 0.05) 1px, transparent 1px);
                background-size: 40px 40px;
                z-index: -1;
                pointer-events: none;
            }

            /* Skip Link for Accessibility */
            .skip-link {
                position: absolute;
                top: -40px;
                left: 0;
                background: var(--color-accent-1);
                color: var(--color-base-bg);
                padding: var(--space-sm) var(--space-md);
                text-decoration: none;
                border-radius: var(--radius-md);
                z-index: 1000;
            }

            .skip-link:focus {
                top: var(--space-sm);
                left: var(--space-sm);
            }

            /* ========================================
           Navigation Header
        ======================================== */
            .header {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 100;
                background: rgba(18, 24, 39, 0.8);
                -webkit-backdrop-filter: blur(12px) saturate(180%);
                backdrop-filter: blur(12px) saturate(180%);
                border-bottom: 1px solid rgba(124, 58, 237, 0.2);
                box-shadow: var(--shadow-md);
            }

            .nav-container {
                max-width: 1400px;
                margin: 0 auto;
                padding: var(--space-md) var(--space-lg);
                display: flex;
                align-items: center;
                gap: var(--space-lg);
                flex-wrap: wrap;
            }

            .site-name {
                font-size: var(--text-xl);
                font-weight: 700;
                background: var(--gradient-primary);
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                text-decoration: none;
                letter-spacing: -0.02em;
                transition: transform 0.3s ease;
            }

            .site-name:hover {
                transform: scale(1.05);
            }

            .breadcrumb {
                display: flex;
                list-style: none;
                gap: var(--space-sm);
                align-items: center;
                flex-wrap: wrap;
            }

            .breadcrumb li {
                display: flex;
                align-items: center;
                gap: var(--space-sm);
            }

            .breadcrumb li:not(:last-child)::after {
                content: 'â€º';
                color: var(--color-base-text-muted);
                font-size: var(--text-lg);
            }

            .breadcrumb a {
                color: var(--color-base-text-muted);
                text-decoration: none;
                font-size: var(--text-sm);
                transition: color 0.3s ease;
            }

            .breadcrumb a:hover,
            .breadcrumb a:focus {
                color: var(--color-accent-1);
            }

            /* ========================================
           Main Content Area
        ======================================== */
            .main-content {
                max-width: 1400px;
                margin: 0 auto;
                padding: calc(80px + var(--space-2xl)) var(--space-lg) var(--space-3xl);
                min-height: calc(100vh - 200px);
            }

            /* Hero Section */
            .hero-section {
                text-align: center;
                margin-bottom: var(--space-3xl);
                animation: fadeInUp 0.8s ease-out;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .hero-title {
                font-size: var(--text-4xl);
                font-weight: 700;
                margin-bottom: var(--space-md);
                letter-spacing: -0.03em;
                background: var(--gradient-primary);
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                position: relative;
                display: inline-block;
            }

            .hero-title::after {
                content: '';
                position: absolute;
                bottom: -10px;
                left: 50%;
                transform: translateX(-50%);
                width: 100px;
                height: 4px;
                background: var(--gradient-primary);
                border-radius: var(--radius-full);
            }

            .hero-subtitle {
                font-size: var(--text-lg);
                color: var(--color-base-text-muted);
                margin-top: var(--space-xl);
            }

            /* ========================================
           Game Container
        ======================================== */
            .game-wrapper {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: var(--space-2xl);
            }

            .game-status {
                text-align: center;
                animation: fadeIn 0.5s ease-out;
            }

            .status-text {
                font-size: var(--text-2xl);
                font-weight: 600;
                color: var(--color-base-text);
                margin-bottom: var(--space-sm);
            }

            .current-player {
                font-size: var(--text-lg);
                color: var(--color-base-text-muted);
            }

            .player-indicator {
                display: inline-block;
                padding: var(--space-xs) var(--space-md);
                border-radius: var(--radius-full);
                font-weight: 600;
                transition: all 0.3s ease;
            }

            .player-indicator.player-x {
                background: rgba(255, 0, 110, 0.2);
                color: var(--color-player-x);
                box-shadow: var(--shadow-glow-pink);
            }

            .player-indicator.player-o {
                background: rgba(0, 212, 255, 0.2);
                color: var(--color-player-o);
                box-shadow: var(--shadow-glow);
            }

            /* Game Board Container */
            .game-container {
                position: relative;
                display: inline-block;
                padding: var(--space-xl);
                background: rgba(18, 24, 39, 0.6);
                -webkit-backdrop-filter: blur(12px) saturate(180%);
                backdrop-filter: blur(12px) saturate(180%);
                border: 2px solid rgba(124, 58, 237, 0.3);
                border-radius: var(--radius-2xl);
                box-shadow: var(--shadow-lg), var(--shadow-glow);
                animation: fadeInScale 0.8s ease-out 0.2s both;
            }

            @keyframes fadeInScale {
                from {
                    opacity: 0;
                    transform: scale(0.9);
                }

                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            #ticTacToeCanvas {
                display: block;
                border-radius: var(--radius-lg);
                cursor: pointer;
                transition: filter 0.3s ease;
            }

            #ticTacToeCanvas.game-over {
                cursor: default;
                filter: brightness(0.7);
            }

            /* Control Buttons */
            .game-controls {
                display: flex;
                gap: var(--space-md);
                justify-content: center;
                flex-wrap: wrap;
            }

            .btn {
                padding: var(--space-md) var(--space-xl);
                font-size: var(--text-base);
                font-weight: 600;
                font-family: var(--font-sans);
                border: 2px solid transparent;
                border-radius: var(--radius-lg);
                cursor: pointer;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                background: var(--gradient-primary);
                color: white;
                box-shadow: var(--shadow-md);
                position: relative;
                overflow: hidden;
            }

            .btn::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.3);
                transform: translate(-50%, -50%);
                transition: width 0.6s, height 0.6s;
            }

            .btn:hover::before {
                width: 300px;
                height: 300px;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-lg), var(--shadow-glow);
            }

            .btn:active {
                transform: translateY(0);
            }

            .btn span {
                position: relative;
                z-index: 1;
            }

            /* ========================================
           Footer
        ======================================== */
            .footer {
                margin-top: var(--space-3xl);
                padding: var(--space-2xl) var(--space-lg);
                background: rgba(18, 24, 39, 0.6);
                -webkit-backdrop-filter: blur(12px) saturate(180%);
                backdrop-filter: blur(12px) saturate(180%);
                border-top: 1px solid rgba(124, 58, 237, 0.2);
            }

            .footer-content {
                max-width: 1400px;
                margin: 0 auto;
                display: flex;
                flex-direction: column;
                gap: var(--space-lg);
                align-items: center;
                text-align: center;
            }

            .footer-links {
                display: flex;
                gap: var(--space-lg);
                flex-wrap: wrap;
                justify-content: center;
            }

            .footer-links a {
                color: var(--color-base-text-muted);
                text-decoration: none;
                font-size: var(--text-sm);
                transition: color 0.3s ease;
            }

            .footer-links a:hover {
                color: var(--color-accent-1);
            }

            .copyright {
                display: flex;
                align-items: center;
                gap: var(--space-sm);
                font-size: var(--text-sm);
                color: var(--color-base-text-muted);
            }

            .license-link img {
                transition: opacity 0.3s ease;
                opacity: 0.7;
            }

            .license-link:hover img {
                opacity: 1;
            }

            /* ========================================
           Responsive Design
        ======================================== */
            @media (max-width: 768px) {
                .nav-container {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: var(--space-md);
                }

                .main-content {
                    padding: calc(120px + var(--space-xl)) var(--space-md) var(--space-2xl);
                }

                .game-container {
                    padding: var(--space-md);
                    max-width: 95vw;
                }

                #ticTacToeCanvas {
                    max-width: 100%;
                    height: auto;
                }

                .game-controls {
                    flex-direction: column;
                    width: 100%;
                }

                .btn {
                    width: 100%;
                }
            }

            @media (max-width: 480px) {
                .hero-title {
                    font-size: var(--text-3xl);
                }

                .status-text {
                    font-size: var(--text-xl);
                }
            }

            /* ========================================
           Accessibility: Reduced Motion
        ======================================== */
            @media (prefers-reduced-motion: reduce) {

                *,
                *::before,
                *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }

            /* Focus Styles */
            a:focus-visible,
            button:focus-visible,
            canvas:focus-visible {
                outline: 2px solid var(--color-accent-1);
                outline-offset: 4px;
                border-radius: var(--radius-sm);
            }
        </style>
    </head>

    <body>
        <!-- Skip Link for Accessibility -->
        <a href="#main-content" class="skip-link">Skip to main content</a>

        <!-- Navigation Header -->
        <header class="header" role="banner">
            <nav class="nav-container" aria-label="Main navigation">
                <a href="../index.html" class="site-name" aria-label="John Samuel - Home">John Samuel</a>
                <ul class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
                    <li property="itemListElement" typeof="ListItem">
                        <a property="item" typeof="WebPage" href="../index.html">
                            <span property="name">Home</span>
                        </a>
                    </li>
                    <li property="itemListElement" typeof="ListItem">
                        <a property="item" typeof="WebPage" href="../games.html">
                            <span property="name">Games</span>
                        </a>
                    </li>
                    <li property="itemListElement" typeof="ListItem">
                        <a property="item" typeof="WebPage" href="../../research/research.html">
                            <span property="name">Research</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">Tic-Tac-Toe</h1>
                <p class="hero-subtitle">Classic strategy game with a futuristic twist</p>
            </section>

            <!-- Game Area -->
            <div class="game-wrapper">
                <!-- Game Status -->
                <div class="game-status" role="status" aria-live="polite">
                    <div class="status-text" id="statusMessage">Game Ready</div>
                    <div class="current-player">
                        Current Player: <span class="player-indicator player-o" id="playerIndicator">O</span>
                    </div>
                </div>

                <!-- Game Board -->
                <div class="game-container">
                    <canvas id="ticTacToeCanvas" width="600" height="600" role="img" aria-label="Tic-tac-toe game board"
                        tabindex="0">
                        Your browser does not support the canvas element.
                    </canvas>
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button class="btn" id="resetBtn" aria-label="Reset game">
                        <span>Reset Game</span>
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer" role="contentinfo">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="../../about.html">About</a>
                    <a href="../games.html">More Games</a>
                    <a href="../../research/research.html">Research</a>
                </div>
                <div class="copyright">
                    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" class="license-link"
                        aria-label="Creative Commons License">
                        <img alt="Creative Commons License" src="./../../../images/license.png" width="80"
                            height="15" />
                    </a>
                </div>
            </div>
        </footer>

        <!-- Game JavaScript -->
        <script>
            /**
             * Tic-Tac-Toe Game
             * Modern JavaScript implementation with best practices
             */

            // Game Configuration
            const CONFIG = {
                CANVAS_SIZE: 600,
                GRID_SIZE: 3,
                CELL_SIZE: 200,
                COLORS: {
                    GRID: '#7c3aed',
                    PLAYER_X: '#ff006e',
                    PLAYER_O: '#00d4ff',
                    WIN_LINE: '#fbbf24',
                    BACKGROUND: 'transparent'
                },
                LINE_WIDTHS: {
                    GRID: 8,
                    SYMBOL: 10,
                    WIN: 12
                },
                PADDING: 20,
                ANIMATION: {
                    DURATION: 300,
                    EASING: 'ease-out'
                }
            };

            // Game State
            class GameState {
                constructor() {
                    this.reset();
                }

                reset() {
                    this.board = Array(CONFIG.GRID_SIZE).fill(null).map(() =>
                        Array(CONFIG.GRID_SIZE).fill(0)
                    );
                    this.currentPlayer = 2; // Start with O (Player 2)
                    this.isGameOver = false;
                    this.winner = null;
                    this.winningLine = null;
                }

                makeMove(row, col) {
                    if (this.isGameOver || this.board[row][col] !== 0) {
                        return false;
                    }

                    this.board[row][col] = this.currentPlayer;
                    return true;
                }

                switchPlayer() {
                    this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
                }

                checkWinner(row, col) {
                    const player = this.board[row][col];

                    // Check horizontal
                    if (this.board[row].every(cell => cell === player)) {
                        this.winningLine = { type: 'horizontal', index: row };
                        return true;
                    }

                    // Check vertical
                    if (this.board.every(r => r[col] === player)) {
                        this.winningLine = { type: 'vertical', index: col };
                        return true;
                    }

                    // Check diagonal (top-left to bottom-right)
                    if (row === col) {
                        if (this.board.every((r, i) => r[i] === player)) {
                            this.winningLine = { type: 'diagonal-left' };
                            return true;
                        }
                    }

                    // Check anti-diagonal (top-right to bottom-left)
                    if (row + col === CONFIG.GRID_SIZE - 1) {
                        if (this.board.every((r, i) => r[CONFIG.GRID_SIZE - 1 - i] === player)) {
                            this.winningLine = { type: 'diagonal-right' };
                            return true;
                        }
                    }

                    return false;
                }

                isBoardFull() {
                    return this.board.every(row => row.every(cell => cell !== 0));
                }

                getCurrentPlayerName() {
                    return this.currentPlayer === 1 ? 'X' : 'O';
                }
            }

            // Canvas Renderer
            class GameRenderer {
                constructor(canvas) {
                    this.canvas = canvas;
                    this.ctx = canvas.getContext('2d');
                    this.ctx.imageSmoothingEnabled = true;
                    this.ctx.imageSmoothingQuality = 'high';
                }

                clear() {
                    this.ctx.clearRect(0, 0, CONFIG.CANVAS_SIZE, CONFIG.CANVAS_SIZE);
                }

                drawGrid() {
                    this.ctx.strokeStyle = CONFIG.COLORS.GRID;
                    this.ctx.lineWidth = CONFIG.LINE_WIDTHS.GRID;
                    this.ctx.lineCap = 'round';
                    this.ctx.shadowBlur = 15;
                    this.ctx.shadowColor = CONFIG.COLORS.GRID;

                    this.ctx.beginPath();

                    // Horizontal lines
                    for (let i = 1; i < CONFIG.GRID_SIZE; i++) {
                        const y = i * CONFIG.CELL_SIZE;
                        this.ctx.moveTo(0, y);
                        this.ctx.lineTo(CONFIG.CANVAS_SIZE, y);
                    }

                    // Vertical lines
                    for (let i = 1; i < CONFIG.GRID_SIZE; i++) {
                        const x = i * CONFIG.CELL_SIZE;
                        this.ctx.moveTo(x, 0);
                        this.ctx.lineTo(x, CONFIG.CANVAS_SIZE);
                    }

                    this.ctx.stroke();
                    this.ctx.shadowBlur = 0;
                }

                drawX(row, col) {
                    const x = col * CONFIG.CELL_SIZE;
                    const y = row * CONFIG.CELL_SIZE;
                    const padding = CONFIG.PADDING;

                    this.ctx.strokeStyle = CONFIG.COLORS.PLAYER_X;
                    this.ctx.lineWidth = CONFIG.LINE_WIDTHS.SYMBOL;
                    this.ctx.lineCap = 'round';
                    this.ctx.shadowBlur = 20;
                    this.ctx.shadowColor = CONFIG.COLORS.PLAYER_X;

                    this.ctx.beginPath();
                    this.ctx.moveTo(x + padding, y + padding);
                    this.ctx.lineTo(x + CONFIG.CELL_SIZE - padding, y + CONFIG.CELL_SIZE - padding);
                    this.ctx.moveTo(x + CONFIG.CELL_SIZE - padding, y + padding);
                    this.ctx.lineTo(x + padding, y + CONFIG.CELL_SIZE - padding);
                    this.ctx.stroke();

                    this.ctx.shadowBlur = 0;
                }

                drawO(row, col) {
                    const x = col * CONFIG.CELL_SIZE + CONFIG.CELL_SIZE / 2;
                    const y = row * CONFIG.CELL_SIZE + CONFIG.CELL_SIZE / 2;
                    const radius = CONFIG.CELL_SIZE / 2 - CONFIG.PADDING;

                    this.ctx.strokeStyle = CONFIG.COLORS.PLAYER_O;
                    this.ctx.lineWidth = CONFIG.LINE_WIDTHS.SYMBOL;
                    this.ctx.lineCap = 'round';
                    this.ctx.shadowBlur = 20;
                    this.ctx.shadowColor = CONFIG.COLORS.PLAYER_O;

                    this.ctx.beginPath();
                    this.ctx.arc(x, y, radius, 0, 2 * Math.PI);
                    this.ctx.stroke();

                    this.ctx.shadowBlur = 0;
                }

                drawWinLine(winningLine) {
                    this.ctx.strokeStyle = CONFIG.COLORS.WIN_LINE;
                    this.ctx.lineWidth = CONFIG.LINE_WIDTHS.WIN;
                    this.ctx.lineCap = 'round';
                    this.ctx.shadowBlur = 25;
                    this.ctx.shadowColor = CONFIG.COLORS.WIN_LINE;

                    this.ctx.beginPath();

                    switch (winningLine.type) {
                        case 'horizontal': {
                            const y = winningLine.index * CONFIG.CELL_SIZE + CONFIG.CELL_SIZE / 2;
                            this.ctx.moveTo(CONFIG.PADDING, y);
                            this.ctx.lineTo(CONFIG.CANVAS_SIZE - CONFIG.PADDING, y);
                            break;
                        }
                        case 'vertical': {
                            const x = winningLine.index * CONFIG.CELL_SIZE + CONFIG.CELL_SIZE / 2;
                            this.ctx.moveTo(x, CONFIG.PADDING);
                            this.ctx.lineTo(x, CONFIG.CANVAS_SIZE - CONFIG.PADDING);
                            break;
                        }
                        case 'diagonal-left':
                            this.ctx.moveTo(CONFIG.PADDING, CONFIG.PADDING);
                            this.ctx.lineTo(CONFIG.CANVAS_SIZE - CONFIG.PADDING, CONFIG.CANVAS_SIZE - CONFIG.PADDING);
                            break;
                        case 'diagonal-right':
                            this.ctx.moveTo(CONFIG.CANVAS_SIZE - CONFIG.PADDING, CONFIG.PADDING);
                            this.ctx.lineTo(CONFIG.PADDING, CONFIG.CANVAS_SIZE - CONFIG.PADDING);
                            break;
                    }

                    this.ctx.stroke();
                    this.ctx.shadowBlur = 0;
                }

                render(gameState) {
                    this.clear();
                    this.drawGrid();

                    // Draw all symbols
                    for (let row = 0; row < CONFIG.GRID_SIZE; row++) {
                        for (let col = 0; col < CONFIG.GRID_SIZE; col++) {
                            const cell = gameState.board[row][col];
                            if (cell === 1) {
                                this.drawX(row, col);
                            } else if (cell === 2) {
                                this.drawO(row, col);
                            }
                        }
                    }

                    // Draw winning line if game is over
                    if (gameState.isGameOver && gameState.winningLine) {
                        this.drawWinLine(gameState.winningLine);
                    }
                }
            }

            // UI Controller
            class UIController {
                constructor() {
                    this.statusMessage = document.getElementById('statusMessage');
                    this.playerIndicator = document.getElementById('playerIndicator');
                    this.canvas = document.getElementById('ticTacToeCanvas');
                }

                updateStatus(message) {
                    this.statusMessage.textContent = message;
                }

                updatePlayerIndicator(player) {
                    this.playerIndicator.textContent = player;
                    this.playerIndicator.className = 'player-indicator';
                    this.playerIndicator.classList.add(player === 'X' ? 'player-x' : 'player-o');
                }

                setGameOver(isOver) {
                    if (isOver) {
                        this.canvas.classList.add('game-over');
                    } else {
                        this.canvas.classList.remove('game-over');
                    }
                }
            }

            // Main Game Controller
            class TicTacToeGame {
                constructor() {
                    this.state = new GameState();
                    this.renderer = new GameRenderer(document.getElementById('ticTacToeCanvas'));
                    this.ui = new UIController();

                    this.initializeEventListeners();
                    this.render();
                    this.updateUI();
                }

                initializeEventListeners() {
                    // Canvas click handler
                    this.renderer.canvas.addEventListener('click', (event) => {
                        this.handleCanvasClick(event);
                    });

                    // Reset button handler
                    document.getElementById('resetBtn').addEventListener('click', () => {
                        this.reset();
                    });

                    // Keyboard support for accessibility
                    this.renderer.canvas.addEventListener('keydown', (event) => {
                        if (event.key === 'Enter' || event.key === ' ') {
                            event.preventDefault();
                            this.handleCanvasClick(event);
                        }
                    });
                }

                handleCanvasClick(event) {
                    if (this.state.isGameOver) {
                        return;
                    }

                    const rect = this.renderer.canvas.getBoundingClientRect();
                    const scaleX = this.renderer.canvas.width / rect.width;
                    const scaleY = this.renderer.canvas.height / rect.height;

                    const x = (event.clientX - rect.left) * scaleX;
                    const y = (event.clientY - rect.top) * scaleY;

                    const col = Math.floor(x / CONFIG.CELL_SIZE);
                    const row = Math.floor(y / CONFIG.CELL_SIZE);

                    // Validate coordinates
                    if (row < 0 || row >= CONFIG.GRID_SIZE || col < 0 || col >= CONFIG.GRID_SIZE) {
                        return;
                    }

                    this.makeMove(row, col);
                }

                makeMove(row, col) {
                    if (!this.state.makeMove(row, col)) {
                        return;
                    }

                    this.render();

                    // Check for winner
                    if (this.state.checkWinner(row, col)) {
                        this.endGame(`Player ${this.state.getCurrentPlayerName()} Wins!`);
                        return;
                    }

                    // Check for draw
                    if (this.state.isBoardFull()) {
                        this.endGame("It's a Draw!");
                        return;
                    }

                    // Switch player
                    this.state.switchPlayer();
                    this.updateUI();
                }

                endGame(message) {
                    this.state.isGameOver = true;
                    this.ui.updateStatus(message);
                    this.ui.setGameOver(true);
                    this.render();
                }

                reset() {
                    this.state.reset();
                    this.ui.setGameOver(false);
                    this.render();
                    this.updateUI();
                }

                render() {
                    this.renderer.render(this.state);
                }

                updateUI() {
                    const player = this.state.getCurrentPlayerName();
                    this.ui.updateStatus('Game in Progress');
                    this.ui.updatePlayerIndicator(player);
                }
            }

            // Initialize game when DOM is ready
            document.addEventListener('DOMContentLoaded', () => {
                new TicTacToeGame();
            });
        </script>
    </body>

</html>